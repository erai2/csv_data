<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>월간 스케줄 캘린더</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Noto Sans KR', sans-serif; }
        .calendar-grid { display: grid; grid-template-columns: repeat(7, 1fr); gap: 1px; }
        .calendar-cell { height: 120px; transition: background-color 0.3s; }
        .calendar-cell:hover { background-color: #f9fafb; cursor: pointer; }
        .day-name { font-weight: 500; }
        .day-number { font-weight: 700; }
        .event {
            font-size: 0.75rem;
            padding: 2px 6px;
            border-radius: 4px;
            margin-bottom: 2px;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
        }
        .modal-backdrop { transition: opacity 0.3s ease; }
        .month-nav-btn {
            width: 32px; height: 32px; display: inline-flex; align-items: center; justify-content: center;
            border-radius: 9999px; font-size: 0.875rem; font-weight: 500; transition: all 0.2s; cursor: pointer;
        }
        .month-nav-btn:hover { background-color: #e5e7eb; }
        .month-nav-btn.active { background-color: #3b82f6; color: white; }
        /* Planner Modal Styles */
        .planner-section-title { font-size: 1.125rem; font-weight: 600; border-bottom: 2px solid #e5e7eb; padding-bottom: 8px; margin-bottom: 12px; }
        .todo-item { display: flex; align-items: center; gap: 8px; margin-bottom: 8px; }
        .todo-item input[type="checkbox"] { width: 18px; height: 18px; }
        .todo-item input[type="text"] { flex-grow: 1; border: none; border-bottom: 1px solid #d1d5db; padding: 4px 0; }
        .todo-item input[type="text"]:focus { outline: none; border-bottom-color: #3b82f6; }
        .todo-item.completed input[type="text"] { text-decoration: line-through; color: #9ca3af; }
        .schedule-item { display: flex; gap: 8px; margin-bottom: 8px; }
        .schedule-item input { border: 1px solid #d1d5db; border-radius: 4px; padding: 4px 8px; }
        .schedule-item input.time { width: 120px; }
        .schedule-item input.text { flex-grow: 1; }

        /* 스크롤바 */
        ::-webkit-scrollbar { width: 5px; }
        ::-webkit-scrollbar-track { background: #f1f1f1; }
        ::-webkit-scrollbar-thumb { background: #888; border-radius: 6px; }
        ::-webkit-scrollbar-thumb:hover { background: #555; }
    </style>
</head>
<body class="bg-gray-100 p-4 sm:p-6 md:p-8">

    <div class="max-w-7xl mx-auto bg-white rounded-xl shadow-lg">
        <div class="p-4 sm:p-6">
            <!-- 월 바로가기 -->
            <div id="month-navigation" class="flex justify-center items-center gap-1 sm:gap-2 mb-4 pb-4 border-b flex-wrap"></div>
            <!-- 캘린더 헤더 -->
            <div class="flex items-center justify-between mb-4">
                <button id="prev-month" class="p-2 rounded-full hover:bg-gray-200"><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" /></svg></button>
                <h2 id="current-month-year" class="text-2xl sm:text-3xl font-bold"></h2>
                <button id="next-month" class="p-2 rounded-full hover:bg-gray-200"><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" /></svg></button>
            </div>
            <!-- 캘린더 요일 -->
            <div class="calendar-grid bg-gray-200 border border-gray-200 rounded-t-lg">
                <div class="day-name text-center p-2 bg-gray-50 text-red-500">일</div><div class="day-name text-center p-2 bg-gray-50">월</div><div class="day-name text-center p-2 bg-gray-50">화</div>
                <div class="day-name text-center p-2 bg-gray-50">수</div><div class="day-name text-center p-2 bg-gray-50">목</div><div class="day-name text-center p-2 bg-gray-50">금</div>
                <div class="day-name text-center p-2 bg-gray-50 text-blue-500">토</div>
            </div>
            <!-- 캘린더 날짜 -->
            <div id="calendar-days" class="calendar-grid bg-gray-200 border-l border-r border-b border-gray-200 rounded-b-lg"></div>
        </div>
    </div>

    <!-- 데일리 플래너 모달 -->
    <div id="planner-modal" class="fixed inset-0 bg-gray-800 bg-opacity-50 modal-backdrop items-center justify-center hidden" style="opacity: 0;">
        <div class="bg-white rounded-lg shadow-xl w-full max-w-2xl m-4 transform transition-transform duration-300 scale-95">
            <div class="p-6 border-b">
                <h3 class="text-2xl font-bold" id="planner-title">Daily Planner</h3>
                <input type="hidden" id="planner-date">
            </div>
            <div class="p-6 max-h-[70vh] overflow-y-auto">
                <!-- Schedule Section -->
                <div>
                    <h4 class="planner-section-title">SCHEDULE</h4>
                    <div id="schedule-list"></div>
                    <button id="add-schedule-btn" class="mt-2 text-sm text-blue-600 hover:text-blue-800">+ 시간대별 일정 추가</button>
                </div>
                <!-- To-Do List Section -->
                <div class="mt-6">
                    <h4 class="planner-section-title">TO DO LIST</h4>
                    <div id="todo-list"></div>
                    <button id="add-todo-btn" class="mt-2 text-sm text-blue-600 hover:text-blue-800">+ 할 일 추가</button>
                </div>
                <!-- Notes Section -->
                <div class="mt-6">
                    <h4 class="planner-section-title">NOTES</h4>
                    <textarea id="notes-area" class="w-full h-24 p-2 border rounded-md" placeholder="자유롭게 메모를 남겨보세요..."></textarea>
                </div>
            </div>
            <div class="p-4 bg-gray-50 flex justify-end space-x-3 rounded-b-lg">
                <button type="button" id="delete-plan-btn" class="px-4 py-2 bg-red-500 text-white rounded-md hover:bg-red-600 hidden">전체삭제</button>
                <button type="button" id="cancel-btn" class="px-4 py-2 bg-gray-200 rounded-md hover:bg-gray-300">취소</button>
                <button type="button" id="save-btn" class="px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700">저장</button>
            </div>
        </div>
    </div>

    <script>
    document.addEventListener('DOMContentLoaded', function() {
        const calendarDays = document.getElementById('calendar-days');
        const currentMonthYear = document.getElementById('current-month-year');
        const prevMonthBtn = document.getElementById('prev-month');
        const nextMonthBtn = document.getElementById('next-month');
        const monthNavigation = document.getElementById('month-navigation');
        const plannerModal = document.getElementById('planner-modal');
        const plannerTitle = document.getElementById('planner-title');
        const plannerDateInput = document.getElementById('planner-date');
        const scheduleList = document.getElementById('schedule-list');
        const todoList = document.getElementById('todo-list');
        const notesArea = document.getElementById('notes-area');
        const addScheduleBtn = document.getElementById('add-schedule-btn');
        const addTodoBtn = document.getElementById('add-todo-btn');
        const deletePlanBtn = document.getElementById('delete-plan-btn');
        const cancelBtn = document.getElementById('cancel-btn');
        const saveBtn = document.getElementById('save-btn');

        let currentDate = new Date(2025, 9, 1); // Start in October 2025
        let plannerData = {};

        // Data from PDFs
        const initialPlannerData = {
            // October 2025 Data
            "2025-10-01": { schedules: [], todos: [{ text: "LO", completed: false }], notes: "BOS" },
            "2025-10-02": { schedules: [{ time: "12:56", text: "KE0092 BOS-ICN" }], todos: [{ text: "LO", completed: false }], notes: "BOS/-11:35" },
            "2025-10-03": { schedules: [{ time: "", text: "KE0092 BOS-ICN/-18:01" }], todos: [], notes: "" },
            "2025-10-04": { schedules: [], todos: [{ text: "ATDO", completed: false }], notes: "" },
            "2025-10-05": { schedules: [], todos: [{ text: "ATDO", completed: false }], notes: "" },
            "2025-10-06": { schedules: [{ time: "07:53-10:42", text: "KE0621 ICN-MNL" }, { time: "12:17-17:24", text: "KE0622 MNL-ICN" }], todos: [], notes: "" },
            "2025-10-07": { schedules: [], todos: [{ text: "ATDO", completed: false }], notes: "" },
            "2025-10-08": { schedules: [{ time: "14:55-10:22", text: "KE0017 ICN-LAX" }], todos: [], notes: "LAX/-" },
            "2025-10-09": { schedules: [], todos: [{ text: "LO", completed: false }], notes: "LAX/-22:30" },
            "2025-10-10": { schedules: [{ time: "23:52-", text: "KE0012 LAX-ICN" }], todos: [], notes: "" },
            "2025-10-11": { schedules: [{ time: "", text: "KE0012 LAX-ICN/-05:02" }], todos: [], notes: "" },
            "2025-10-12": { schedules: [], todos: [{ text: "ATDO", completed: false }], notes: "" },
            "2025-10-13": { schedules: [], todos: [{ text: "ATDO", completed: false }], notes: "" },
            "2025-10-14": { schedules: [{ time: "09:35-09:55", text: "KE0073 ICN-YYZ" }], todos: [], notes: "YYZ/-" },
            "2025-10-15": { schedules: [], todos: [{ text: "LO", completed: false }], notes: "YYZ/-" },
            "2025-10-16": { schedules: [{ time: "12:30-", text: "KE0074 YYZ-ICN" }], todos: [{ text: "LO", completed: false }], notes: "" },
            "2025-10-17": { schedules: [{ time: "", text: "KE0074 YYZ-ICN" }], todos: [], notes: "" },
            "2025-10-18": { schedules: [], todos: [{ text: "ATDO", completed: false }], notes: "" },
            "2025-10-19": { schedules: [], todos: [{ text: "ATDO", completed: false }], notes: "" },
            "2025-10-22": { schedules: [], todos: [{ text: "ADO", completed: false }], notes: "" },
            "2025-10-23": { schedules: [{ time: "17:15-22:45", text: "KE8425 ICN-GUM" }], todos: [], notes: "GUM" },
            "2025-10-24": { schedules: [], todos: [{ text: "LO", completed: false }], notes: "GUM" },
            "2025-10-25": { schedules: [{ time: "01:00-04:45", text: "KE8426 GUM-ICN" }], todos: [], notes: "" },
            
            // November 2025 Data
            "2025-11-01": { schedules: [{ time: "19:35-20:45", text: "KE1409 ICN-PUS" }], todos: [{ text: "LO", completed: false }], notes: "PUS" },
            "2025-11-02": { schedules: [{ time: "10:45-11:55", text: "KE2081 PUS-TAO" }, { time: "13:05-16:00", text: "KE2082 TAO-PUS" }], todos: [{ text: "LO", completed: false }], notes: "PUS/-09:25" },
            "2025-11-03": { schedules: [{ time: "07:00-08:10", text: "KE1402 PUS-ICN" }], todos: [{ text: "LO", completed: false }], notes: "PUS/-05:40" },
            "2025-11-04": { schedules: [], todos: [{ text: "ADO", completed: false }], notes: "" },
            "2025-11-05": { schedules: [{ time: "13:45-16:50", text: "KE2005 ICN-HKG" }, { time: "18:10-22:45", text: "KE2006 HKG-ICN" }], todos: [], notes: "" },
            "2025-11-06": { schedules: [], todos: [{ text: "ATDO", completed: false }], notes: "" },
            "2025-11-07": { schedules: [{ time: "12:05-18:30", text: "KE0901 ICN-CDG" }], todos: [{ text: "LO", completed: false }], notes: "CDG" },
            "2025-11-08": { schedules: [{ time: "21:00-", text: "KE0902 CDG-ICN" }], todos: [], notes: "CDG/-19:40" },
            "2025-11-09": { schedules: [{ time: "", text: "CDG-ICN/-17:20" }], todos: [], notes: "" },
            "2025-11-10": { schedules: [], todos: [{ text: "ATDO", completed: false }], notes: "" },
            "2025-11-11": { schedules: [], todos: [{ text: "ATDO", completed: false }], notes: "" },
            "2025-11-12": { schedules: [], todos: [{ text: "ATDO", completed: false }], notes: "" },
            "2025-11-13": { schedules: [], todos: [{ text: "ATDO", completed: false }], notes: "" },
            "2025-11-14": { schedules: [{ time: "07:50-09:20", text: "KE0787 ICN-FUK" }, { time: "10:30-12:00", text: "KE0788 FUK-ICN" }], todos: [], notes: "" },
            "2025-11-15": { schedules: [{ time: "08:25-09:45", text: "KE0881 ICN-PVG" }, { time: "11:20-14:25", text: "KE0882 PVG-ICN" }], todos: [], notes: "" },
            "2025-11-16": { schedules: [{ time: "18:45-20:00", text: "KE1205 GMP-CJU" }, { time: "20:50-22:05", text: "KE1336 CJU-GMP" }], todos: [], notes: "" },
            "2025-11-17": { schedules: [], todos: [{ text: "ADD", completed: false }], notes: "" },
            "2025-11-18": { schedules: [{ time: "17:15-18:30", text: "KE1179 GMP-CJU" }, { time: "20:10-21:10", text: "KE1558 CJU-PUS" }], todos: [{ text: "LO", completed: false }], notes: "PUS" },
            "2025-11-19": { schedules: [{ time: "12:55-14:20", text: "KE2133 PUS-NGO" }, { time: "15:20-17:00", text: "KE2134 NGO-PUS" }], todos: [{ text: "LO", completed: false }], notes: "PUS/-11:35" },
            "2025-11-20": { schedules: [{ time: "07:35-08:35", text: "KE1505 PUS-CJU" }, { time: "09:20-10:20", text: "KE1512 CJU-PUS" }, { time: "11:10-12:10", text: "KE1521 PUS-CJU" }, { time: "14:25-15:40", text: "KE1238 CJU-GMP" }], todos: [], notes: "PUS/-06:40" },
            "2025-11-21": { schedules: [{ time: "16:55-19:30", text: "KE0713 ICN-NRT" }, { time: "20:40-23:25", text: "KE0714 NRT-ICN" }], todos: [], notes: "" },
            "2025-11-23": { schedules: [{ time: "09:00-10:25", text: "KE2051 GMP-PEK" }, { time: "11:45-14:45", text: "KE2052 PEK-GMP" }], todos: [], notes: "" },
            "2025-11-24": { schedules: [], todos: [{ text: "ADG", completed: false }], notes: "" },
            "2025-11-26": { schedules: [], todos: [{ text: "ADD", completed: false }], notes: "" },
            "2025-11-28": { schedules: [{ time: "19:30-19:30", text: "KE0085 ICN-JFK" }], todos: [{ text: "LO", completed: false }], notes: "JFK" },
            "2025-11-29": { schedules: [], todos: [{ text: "LO", completed: false }], notes: "JFK" },
            "2025-11-30": { schedules: [{ time: "12:00-", text: "KE0082 JFK-ICN" }], todos: [], notes: "JFK/-10:40" }
        };

        function loadData() {
            const storedData = localStorage.getItem('calendarPlanner');
            if (storedData) {
                plannerData = JSON.parse(storedData);
            } else {
                plannerData = initialPlannerData; // Load initial data if nothing is stored
                saveData();
            }
        }

        function saveData() {
            localStorage.setItem('calendarPlanner', JSON.stringify(plannerData));
        }

        function generateCalendar(date) {
            calendarDays.innerHTML = '';
            const year = date.getFullYear();
            const month = date.getMonth();
            currentMonthYear.textContent = `${year}년 ${month + 1}월`;
            updateActiveMonthButton(month);
            
            const firstDayOfMonth = new Date(year, month, 1).getDay();
            const daysInMonth = new Date(year, month + 1, 0).getDate();

            for (let i = 0; i < firstDayOfMonth; i++) {
                calendarDays.appendChild(Object.assign(document.createElement('div'), { className: 'calendar-cell bg-gray-50' }));
            }

            for (let day = 1; day <= daysInMonth; day++) {
                const dateCell = document.createElement('div');
                dateCell.className = 'calendar-cell relative p-2 bg-white';
                const dateString = `${year}-${String(month + 1).padStart(2, '0')}-${String(day).padStart(2, '0')}`;
                
                const dayNumber = document.createElement('span');
                dayNumber.className = 'day-number text-sm';
                dayNumber.textContent = day;
                
                const today = new Date();
                if (year === today.getFullYear() && month === today.getMonth() && day === today.getDate()) {
                    dayNumber.className += ' bg-blue-500 text-white rounded-full w-7 h-7 inline-flex items-center justify-center';
                }
                const dayOfWeek = new Date(year, month, day).getDay();
                if (dayOfWeek === 0) dayNumber.classList.add('text-red-500');
                if (dayOfWeek === 6) dayNumber.classList.add('text-blue-500');

                dateCell.appendChild(dayNumber);
                dateCell.onclick = () => openPlanner(dateString);

                if (plannerData[dateString]) {
                    const eventsContainer = Object.assign(document.createElement('div'), { className: 'mt-1 space-y-1 overflow-y-auto pr-1' });
                    eventsContainer.style.height = 'calc(100% - 30px)';

                    const dayData = plannerData[dateString];

                    if (dayData.schedules) {
                        dayData.schedules.forEach(schedule => {
                            if (schedule.text) {
                                const eventDiv = document.createElement('div');
                                eventDiv.className = 'event bg-blue-100 text-blue-800';
                                eventDiv.textContent = `${schedule.time} ${schedule.text}`.trim();
                                eventsContainer.appendChild(eventDiv);
                            }
                        });
                    }
                    if (dayData.todos) {
                        dayData.todos.forEach(todo => {
                            if (todo.text) {
                                const eventDiv = document.createElement('div');
                                eventDiv.className = 'event bg-green-100 text-green-800';
                                eventDiv.textContent = todo.text;
                                eventsContainer.appendChild(eventDiv);
                            }
                        });
                    }
                    dateCell.appendChild(eventsContainer);
                }
                calendarDays.appendChild(dateCell);
            }
        }
        
        function openPlanner(date) {
            plannerModal.classList.remove('hidden');
            setTimeout(() => {
                plannerModal.style.opacity = '1';
                plannerModal.querySelector('div').classList.remove('scale-95');
            }, 10);

            plannerDateInput.value = date;
            plannerTitle.textContent = `Daily Planner - ${date}`;
            
            scheduleList.innerHTML = '';
            todoList.innerHTML = '';
            notesArea.value = '';

            const data = plannerData[date];
            if (data) {
                data.schedules.forEach(item => createScheduleItem(item));
                data.todos.forEach(item => createTodoItem(item));
                notesArea.value = data.notes;
                deletePlanBtn.classList.remove('hidden');
            } else {
                 createScheduleItem(); // Add one empty schedule item by default
                 createTodoItem(); // Add one empty todo item by default
                 deletePlanBtn.classList.add('hidden');
            }
        }

        function createScheduleItem(item = { time: '', text: '' }) {
            const div = document.createElement('div');
            div.className = 'schedule-item';
            div.innerHTML = `
                <input type="text" class="time" placeholder="09:00" value="${item.time}">
                <input type="text" class="text" placeholder="회의" value="${item.text}">
                <button class="remove-btn text-red-500 hover:text-red-700">&times;</button>
            `;
            div.querySelector('.remove-btn').onclick = () => div.remove();
            scheduleList.appendChild(div);
        }

        function createTodoItem(item = { text: '', completed: false }) {
            const div = document.createElement('div');
            div.className = 'todo-item';
            if (item.completed) div.classList.add('completed');
            div.innerHTML = `
                <input type="checkbox" ${item.completed ? 'checked' : ''}>
                <input type="text" placeholder="할 일 입력..." value="${item.text}">
                <button class="remove-btn text-red-500 hover:text-red-700">&times;</button>
            `;
            div.querySelector('input[type="checkbox"]').onchange = (e) => {
                div.classList.toggle('completed', e.target.checked);
            };
            div.querySelector('.remove-btn').onclick = () => div.remove();
            todoList.appendChild(div);
        }

        function closePlanner() {
            plannerModal.style.opacity = '0';
            plannerModal.querySelector('div').classList.add('scale-95');
            setTimeout(() => plannerModal.classList.add('hidden'), 300);
        }

        function savePlanner() {
            const date = plannerDateInput.value;
            const schedules = Array.from(scheduleList.children).map(div => ({
                time: div.querySelector('.time').value,
                text: div.querySelector('.text').value
            })).filter(item => item.time || item.text);

            const todos = Array.from(todoList.children).map(div => ({
                completed: div.querySelector('input[type="checkbox"]').checked,
                text: div.querySelector('input[type="text"]').value
            })).filter(item => item.text);

            const notes = notesArea.value;

            if (schedules.length === 0 && todos.length === 0 && !notes.trim()) {
                delete plannerData[date]; // Delete if empty
            } else {
                plannerData[date] = { schedules, todos, notes };
            }
            
            saveData();
            generateCalendar(currentDate);
            closePlanner();
        }

        function deletePlanner() {
            const date = plannerDateInput.value;
            if (confirm(`${date}의 모든 계획을 삭제하시겠습니까?`)) {
                delete plannerData[date];
                saveData();
                generateCalendar(currentDate);
                closePlanner();
            }
        }
        
        function generateMonthNavigation() { 
            monthNavigation.innerHTML = '';
            for (let i = 0; i < 12; i++) {
                const monthBtn = document.createElement('button');
                monthBtn.textContent = i + 1;
                monthBtn.className = 'month-nav-btn';
                monthBtn.dataset.month = i;
                monthBtn.onclick = () => { currentDate.setMonth(i); generateCalendar(currentDate); };
                monthNavigation.appendChild(monthBtn);
            }
        }
        
        function updateActiveMonthButton(month) {
             monthNavigation.querySelectorAll('.month-nav-btn').forEach(btn => {
                btn.classList.remove('active');
                if (parseInt(btn.dataset.month) === month) btn.classList.add('active');
            });
        }
        
        // Event Listeners
        addScheduleBtn.onclick = () => createScheduleItem();
        addTodoBtn.onclick = () => createTodoItem();
        saveBtn.onclick = savePlanner;
        deletePlanBtn.onclick = deletePlanner;
        cancelBtn.onclick = closePlanner;
        plannerModal.onclick = (e) => { if (e.target === plannerModal) closePlanner(); };
        prevMonthBtn.onclick = () => { currentDate.setMonth(currentDate.getMonth() - 1); generateCalendar(currentDate); };
        nextMonthBtn.onclick = () => { currentDate.setMonth(currentDate.getMonth() + 1); generateCalendar(currentDate); };
        
        // Initial Load
        generateMonthNavigation();
        loadData();
        generateCalendar(currentDate);
    });
    </script>
</body>
</html>

